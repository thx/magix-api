{"isNamespace":true,"desc":"辅助MManager","alias":"MRequest","methods":[{"type":"MRequest","desc":"获取models，该用缓存的用缓存，该发起请求的请求","alias":"MRequest#send","memberOf":"MRequest","returns":[{"title":"return","type":"MRequest"}],"isPrivate":true,"isa":"FUNCTION","_name":"send","_params":[{"title":"param","desc":"获取models时的描述信息，如:{name:'Home',urlParams:{a:'12'},postParams:{b:2}}","type":"Object|Array","name":"models"},{"title":"param","desc":"完成时的回调","type":"Function","name":"done"},{"title":"param","desc":"获取哪种类型的models","type":"Integer","name":"flag"},{"title":"param","desc":"是否是保存的动作","type":"Boolean","name":"save"}]},{"type":"MRequest","desc":"获取models，所有请求完成回调done","alias":"MRequest#fetchAll","memberOf":"MRequest","returns":[{"title":"return","type":"MRequest"}],"isa":"FUNCTION","_name":"fetchAll","_params":[{"title":"param","desc":"获取models时的描述信息，如:{name:'Home',cacheKey:'key',urlParams:{a:'12'},postParams:{b:2}}","type":"Object|Array","name":"models"},{"title":"param","desc":"完成时的回调","type":"Function","name":"done"}],"example":[{"title":"example","desc":"\n        //定义\r\n        \r\n        define('testMM',[\"magix/mmanager\",\"magix/model\"],function(require){\r\n            var MM=require(\"magix/mmanager\");\r\n            var Model=require(\"magix/model\");\r\n        \r\n            var TestMM=MM.create(Model);\r\n            TestMM.registerModels([{\r\n                name:'Test1',\r\n                url:'/api/test1.json'\r\n            },{\r\n                name:'Test2',\r\n                url:'/api/test2.json',\r\n                urlParams:{\r\n                    type:'2'\r\n                }\r\n            }]);\r\n            return TestMM;\r\n        \r\n        });\r\n        \r\n        //使用\r\n        \r\n        seajs.use('testMM',function(TM){\r\n        \r\n            TM.fetchAll([{\r\n                name:'Test1'\r\n            },{\r\n                name:'Test2'\r\n            }],function(err,m1,m2){\r\n\r\n            });\r\n        });"}]},{"type":"MRequest","desc":"保存models，所有请求完成回调done","alias":"MRequest#saveAll","memberOf":"MRequest","returns":[{"title":"return","type":"MRequest"}],"isa":"FUNCTION","_name":"saveAll","_params":[{"title":"param","desc":"保存models时的描述信息，如:{name:'Home'urlParams:{a:'12'},postParams:{b:2}}","type":"Object|Array","name":"models"},{"title":"param","desc":"完成时的回调","type":"Function","name":"done"}]},{"type":"MRequest","desc":"获取models，按顺序执行回调done","alias":"MRequest#fetchOrder","memberOf":"MRequest","returns":[{"title":"return","type":"MRequest"}],"isa":"FUNCTION","_name":"fetchOrder","_params":[{"title":"param","desc":"获取models时的描述信息，如:{name:'Home',cacheKey:'key',urlParams:{a:'12'},postParams:{b:2}}","type":"Object|Array","name":"models"},{"title":"param","desc":"完成时的回调","type":"Function","name":"done"}],"example":[{"title":"example","desc":"\n        //代码片断：\r\n        //1：获取多个model，回调只有一个时\r\n        var r=MM.fetchOrder([\r\n            {name:'M1'},\r\n            {name:'M2'},\r\n            {name:'M3'}\r\n        ],function(err,model){//m1,m2,m3，谁快先调用谁，且被调用三次\r\n            if(err){\r\n                alert(err.msg);\r\n            }else{\r\n                alert(model.get('name'));\r\n            }\r\n        });\r\n\r\n        //2:获取多个model，回调多于一个时\r\n        var r=MM.fetchOrder([\r\n            {name:'M1'},\r\n            {name:'M2'},\r\n            {name:'M3'}\r\n        ],function(err,model){//m1什么时间返回，该回调什么时间被调用\r\n            if(err){\r\n                alert(err.msg);\r\n            }else{\r\n                alert(model.get('name'));\r\n            }\r\n        },function(err,model){//m2什么时间返回，该回调什么时间被调用\r\n            if(err){\r\n                alert(err.msg);\r\n            }else{\r\n                alert(model.get('name'));\r\n            }\r\n        });"}]},{"type":"MRequest","desc":"保存models，按顺序执行回调done","alias":"MRequest#saveOrder","memberOf":"MRequest","returns":[{"title":"return","type":"MRequest"}],"isa":"FUNCTION","_name":"saveOrder","_params":[{"title":"param","desc":"保存models时的描述信息，如:{name:'Home'urlParams:{a:'12'},postParams:{b:2}}","type":"Object|Array","name":"models"},{"title":"param","desc":"完成时的回调","type":"Function","name":"done"}]},{"type":"MRequest","desc":"保存models，其中任意一个成功均立即回调，回调会被调用多次","alias":"MRequest#saveOne","memberOf":"MRequest","returns":[{"title":"return","type":"MRequest"}],"isa":"FUNCTION","_name":"saveOne","_params":[{"title":"param","desc":"保存models时的描述信息，如:{name:'Home',urlParams:{a:'12'},postParams:{b:2}}","type":"Object|Array","name":"models"},{"title":"param","desc":"完成时的回调","type":"Function","name":"callback"}]},{"type":"MRequest","desc":"获取models，其中任意一个成功均立即回调，回调会被调用多次","alias":"MRequest#fetchOne","memberOf":"MRequest","returns":[{"title":"return","type":"MRequest"}],"isa":"FUNCTION","_name":"fetchOne","_params":[{"title":"param","desc":"获取models时的描述信息，如:{name:'Home',cacheKey:'key',urlParams:{a:'12'},postParams:{b:2}}","type":"Object|Array","name":"models"},{"title":"param","desc":"完成时的回调","type":"Function","name":"callback"}],"example":[{"title":"example","desc":"\n        //代码片断：\r\n        //1：获取多个model，回调只有一个时\r\n        var r=MM.fetchOrder([\r\n            {name:'M1'},\r\n            {name:'M2'},\r\n            {name:'M3'}\r\n        ],function(err,model){//m1,m2,m3，谁快先调用谁，且被调用三次\r\n            if(err){\r\n                alert(err.msg);\r\n            }else{\r\n                alert(model.get('name'));\r\n            }\r\n        });\r\n\r\n        //2:获取多个model，回调多于一个时\r\n        var r=MM.fetchOrder([\r\n            {name:'M1'},\r\n            {name:'M2'},\r\n            {name:'M3'}\r\n        ],function(err,model){//m1什么时间返回，该回调什么时间被调用\r\n            if(err){\r\n                alert(err.msg);\r\n            }else{\r\n                alert(model.get('name'));\r\n            }\r\n        },function(err,model){//m2什么时间返回，该回调什么时间被调用\r\n            if(err){\r\n                alert(err.msg);\r\n            }else{\r\n                alert(model.get('name'));\r\n            }\r\n        });"}]},{"desc":"中止所有model的请求\r注意：调用该方法后会中止请求，并调用回调传递abort异常消息","alias":"MRequest#stop","memberOf":"MRequest","isa":"FUNCTION","_name":"stop"},{"type":"MRequest","desc":"前一个fetchX或saveX任务做完后的下一个任务","alias":"MRequest#next","memberOf":"MRequest","returns":[{"title":"return","type":"MRequest"}],"isa":"FUNCTION","_name":"next","_params":[{"title":"param","desc":"当前面的任务完成后调用该回调","type":"Function","name":"callback"}],"example":[{"title":"example","desc":"\n        var r=MM.fetchAll([\r\n            {name:'M1'},\r\n            {name:'M2'}\r\n        ],function(err,m1,m2){\r\n\r\n            return 'fetchAllReturned';\r\n        });\r\n\r\n        r.next(function(err,fetchAllReturned){\r\n            alert(fetchAllReturned);\r\n        });"}]},{"desc":"做下一个任务","alias":"MRequest#doNext","memberOf":"MRequest","isPrivate":true,"isa":"FUNCTION","_name":"doNext","_params":[{"title":"param","desc":"上次请求任务回调的返回值","type":"Object","name":"preArgs"}]},{"desc":"销毁当前请求，与stop的区别是：stop后还可以继续发起新请求，而destroy后则不可以，而且不再调用相应的回调","alias":"MRequest#destroy","memberOf":"MRequest","isa":"FUNCTION","_name":"destroy"}],"isa":"CONSTRUCTOR","_name":"MRequest","_params":[{"title":"param","type":"MManager","name":"host"}]}