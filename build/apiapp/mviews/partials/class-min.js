KISSY.add("apiapp/mviews/partials/class",function(a,b,c,d,e){var f=function(a,b,c){var d=[];c||d.push({name:a});var e=b[a.toLowerCase()];if(e&&(e=e.get()),e){var g=e.inherits&&e.inherits[0];g?(g=g.alias.split(".")[0],d.push({type:"mix",name:g}),g=f(g,b,!0),g.length&&(d=d.concat(g))):(g=e.inheritsFrom&&e.inheritsFrom[0],g&&(d.push({name:g}),g=f(g,b,!0),g.length&&(d=d.concat(g))))}return d},g={view:null,data:null,infos:null,method_params:function(a){var b=[];if(a)for(var c,d,e=0;e<a.length;e++)d=a[e],c=d.name,-1==c.indexOf(".")&&b.push(c);return b},moreInfos:function(a,b){return a="$"+a,g[a]||(g[a]={}),g[a][b._name]=b,""},inherits_relation:function(a){var b="",c=g.view.getSubTmpl("inherits"),d=f(a,g.infos.map);return b=e.render(c,{list:d.reverse()})}},h={info:null,example_desc:function(a){return a.desc.replace(/ /g,"&nbsp;").replace(/(?:\bfunction|var|if|else|this\b)/g,'<span style="color:blue">$&</span>').replace(/(^|[^:])(\/{2}[\s\S]*?)(?:[\r\n]|$)/gm,'$1<span style="color:green">$2</span><br />').replace(/\r\n|\r|\n/g,"<br />")}};return b.extend({tmpl:'{{entity=data.data}}\r\n<div class="content">\r\n    <div class="clearfix">\r\n        <h2>\r\n            {{if entity.isClass}}\r\n            {{data.moreInfos(\'class\',entity)}}\r\n            {{if entity._params||entity.example}}\r\n            <a href="#!/home" mx-click="toggleMoreInfos<prevent>({name:\'{{entity.alias}}\',type:\'class\',anchor:\'.content\'})"><i class="tree plus"></i>\r\n            {{/if}}\r\n            {{/if}}\r\n            {{entity.alias}}\r\n            {{if entity.isClass}}{{if entity._params||entity.example}}</a>{{/if}}\r\n            ({{data.method_params(entity._params)}})\r\n            {{/if}}\r\n            <small>{{entity.desc}}</small>\r\n        </h2>\r\n        {{{data.inherits_relation(entity._name)}}}\r\n    </div>\r\n\r\n    {{if entity.properties&&entity.properties.length}}\r\n    <h3>\u5c5e\u6027</h3>\r\n    {{each entity.properties as val}}\r\n    {{data.moreInfos(\'properties\',val)}}\r\n    <div class="list">\r\n        {{if val._params||val.example}}\r\n            <a href="#!/home" mx-click="toggleMoreInfos<prevent>({name:\'{{val._name}}\',type:\'properties\'})">\r\n        {{/if}}\r\n            <i class="tree plus" {{if !val._params&&!val.example}} style="background:none"{{/if}}></i>\r\n            <span class="item" id="J_p_{{val._name}}">{{val._name}}</span>\r\n        {{if val._params||val.example}}</a>{{/if}}\r\n        <small>&#123;{{if val.type}}{{val.type}}{{else}}{{if(val.defaultValue==\'true\'||val.defaultValue==\'false\')}}Boolean{{/if}}{{/if}}&#125;{{if val.memberOf!=entity._name}}<span class="mark">I</span>{{/if}}</small><div class="desc">{{val.desc}}</div></div>\r\n    {{/each}}\r\n    {{/if}}\r\n\r\n    {{if entity.staticProperties&&entity.staticProperties.length}}\r\n    <h3>\u9759\u6001\u5c5e\u6027</h3>\r\n    {{each entity.staticProperties as val}}\r\n    <div class="list"><span class="item" id="J_sp_{{val._name}}">{{val._name}}</span>{{if val.type}} <small>&#123;{{val.type}}&#125;</small>{{/if}}</div>\r\n    <div class="desc">{{val.desc}}</div>\r\n    {{/each}}\r\n    {{/if}}\r\n\r\n    {{if entity.methods&&entity.methods.length}}\r\n    <h3>\u65b9\u6cd5</h3>\r\n    {{each entity.methods as val}}\r\n    {{data.moreInfos(\'methods\',val)}}\r\n    <div class="list">\r\n        {{if val._params||val.example||val.returns}}\r\n        <a href="#!/home" mx-click="toggleMoreInfos<prevent>({name:\'{{val._name}}\',type:\'methods\'})">{{/if}}<i class="tree plus" {{if !val._params&&!val.example&&!val.returns}} style="background:none"{{/if}}></i><span class="item" id="J_m_{{val._name}}">{{val._name}}({{data.method_params(val._params)}})</span> {{if val._params||val.example||val.returns}}</a>{{/if}}{{if val.isPrivate}}<span class="mark">P</span>{{/if}}{{if val.memberOf!=entity._name||(entity.inheritsMap&&entity.inheritsMap[val.alias])}}<span class="mark">I</span>{{/if}}\r\n        <div class="desc">{{val.desc}}</div>\r\n    </div>\r\n    {{/each}}\r\n    {{/if}}\r\n\r\n    {{if entity.staticMethods&&entity.staticMethods.length}}\r\n    <h3>\u9759\u6001\u65b9\u6cd5</h3>\r\n    {{each entity.staticMethods as val}}\r\n    {{data.moreInfos(\'staticMethods\',val)}}\r\n    <div class="list">\r\n        <a href="#!/home" mx-click="toggleMoreInfos<prevent>({name:\'{{val._name}}\',type:\'staticMethods\'})"><i class="tree plus"></i><span class="item" id="J_sm_{{val._name}}">{{val._name}}({{data.method_params(val._params)}})</span></a>{{if val.isPrivate}}<span class="mark">P</span>{{/if}}\r\n        <div class="desc">{{val.desc}}</div>\r\n    </div>\r\n    {{/each}}\r\n    {{/if}}\r\n\r\n    {{if entity.events&&entity.events.length}}\r\n    <h3>\u4e8b\u4ef6</h3>\r\n    {{each entity.events as val}}\r\n    {{data.moreInfos(\'events\',val)}}\r\n    <div class="list">\r\n        <a href="#!/home" mx-click="toggleMoreInfos<prevent>({name:\'{{val._name}}\',type:\'events\'})"><i class="tree plus"></i><span class="item" id="J_e_{{val._name}}">{{val._name}}</span></a>{{if val.memberOf!=entity._name}}<span class="mark">I</span>{{/if}}\r\n        <div class="desc">{{val.desc}}</div>\r\n    </div>\r\n    {{/each}}\r\n    {{/if}}\r\n</div>\r\n\r\n{{#magix-tmpl-inherits}}\r\n<div class="ihrt-outer">\r\n    \u7ee7\u627f\u5173\u7cfb\uff1a\r\n    <div class="ihrt">\r\n        <div class="ihrt-t">Object</div>\r\n        {{each data.list as val}}\r\n            <div class="ihrt-list">\r\n                {{val.name}}{{if val.type}}&lt;{{val.type}}&gt;{{/if}}\r\n        {{/each}}\r\n        {{each data.list as val}}\r\n            </div>\r\n        {{/each}}\r\n    </div>\r\n</div>\r\n<div class="cb"></div>\r\n{{/magix-tmpl-inherits}}\r\n\r\n\r\n{{#magix-tmpl-method}}\r\n    {{content=false}}\r\n    {{if data.info._params&&data.info._params.length}}\r\n    {{content=true}}\r\n    <h4>\u53c2\u6570\uff1a</h4>\r\n    <div class="callout">\r\n        {{each data.info._params as key=>val}}\r\n        {{val.name}} &#123;{{val.type}}&#125; {{if val.isOptional}}[\u53ef\u9009\u53c2\u6570] {{/if}}{{if val.desc}}{{val.desc}}{{/if}}{{if key<data.info._params.length-1}}<br /><br />{{/if}}\r\n        {{/each}}\r\n    </div>\r\n    {{/if}}\r\n\r\n    {{if data.info.returns&&data.info.returns.length}}\r\n    {{content=true}}\r\n    <h4>\u8fd4\u56de\u503c\uff1a</h4>\r\n    <div class="callout">\r\n        {{each data.info.returns as key=>val}}\r\n        &#123;{{val.type}}&#125;{{if val.desc}}{{val.desc}}{{/if}}\r\n        {{/each}}\r\n    </div>\r\n    {{/if}}\r\n\r\n    {{if data.info.example&&data.info.example.length}}\r\n    {{content=true}}\r\n    <h4>\u793a\u4f8b\uff1a</h4>\r\n    <div class="example">\r\n    {{each data.info.example as val}}\r\n    {{{data.example_desc(val)}}}\r\n    {{/each}}\r\n    </div>\r\n    {{/if}}\r\n    {{if !content}}\r\n    \u65e0\r\n    {{/if}}\r\n{{/magix-tmpl-method}}',init:function(){this.observeLocation("focus")},render:function(){var b=this,f=d.local("APIPathInfo"),h=c.fetchClassInfos(b);h.next(function(c,d){if(c)b.setViewHTML(b.id,c.msg);else{var h=d.map[f.action];if(h){var i=h.get();g.data=i,g.infos=d,g.view=b;var j=e.render(b.tmpl,g);b.setViewHTML(b.id,j);var k=b.location.get("focus");if(k){var l=a.one("#J_"+k);l&&b.manage(setTimeout(function(){a.DOM.scrollTop(l.offset().top-50);var b=l.parent(".list");b.css({backgroundColor:"#fff"}).animate({backgroundColor:"#FF8400"},.3).animate({backgroundColor:"#fff"},.3).animate({backgroundColor:"#FF8400"},.3).animate({backgroundColor:"#fff"},.3)},600))}}else b.setViewHTML(b.id,"not found:"+f.action)}})},"toggleMoreInfos<click>":function(b){var c=this,d=c.id+"_method_details",f=a.one("#"+d);f||(f=document.createElement("div"),f.id=d,document.body.appendChild(f),f=a.one(f));var i=a.one("#"+b.currentId),j=i.one("i");j!=c.$lastIcon&&c.$lastIcon&&c.$lastIcon.removeClass("minus").addClass("plus");var k=i.parent("div");if(k.contains(f)){var l="none"==f.css("display");f.css({display:l?"":"none"}),l?j.removeClass("plus").addClass("minus"):j.removeClass("minus").addClass("plus")}else f.css({display:"",paddingLeft:24}),k.append(f),j.removeClass("plus").addClass("minus");c.$lastIcon=j;var m=c.getSubTmpl("method"),n=g,o=n["$"+b.params.type]||{},p=o[b.params.name]||{};h.info=p;var q=j.offset().top;q<a.DOM.scrollTop()&&a.DOM.scrollTop(q-50),f.html(e.render(m,h))}})},{requires:["magix/view","apiapp/models/manager","magix/magix","apiapp/helpers/crox","anim"]});